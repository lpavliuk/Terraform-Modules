# AWS SNS Topic Module

This module creates AWS SNS Topic.

<!-- Next block is generated by terraform-docs following .terraform-docs.yml config -->
<!-- BEGIN_TF_DOCS -->
## Example

```hcl
# main.tf
module "sns_topic" {
  source = "git::https://github.com/lpavliuk/Terraform-Modules.git//aws_sns_topic"

  name              = "slack-channel"
  subscriptions     = [
    { # Slack channel : "infra-alerts"
      protocol = "email"
      endpoint = "example@slack.com"
    }
  ]

  policy_statements = [
    {
      sid     = "AllowManageSNS"
      effect  = "Allow"
      actions = [
        "SNS:Subscribe",
        "SNS:Publish",
        "SNS:ListSubscriptionsByTopic",
        "SNS:GetTopicAttributes"
      ]
      principals = {
        type        = "AWS"
        identifiers = ["*"]
      }
      condition  = {
        test     = "StringEquals"
        variable = "AWS:SourceOwner"
        values   = ["<AWS_ACCOUNT_ID>"]
      }
    },
    {
      sid     = "AllowBackupSNS"
      effect  = "Allow"
      actions = [
        "SNS:Publish",
      ]
      principals = {
        type        = "Service"
        identifiers = ["backup.amazonaws.com"]
      }
    }
  ]
}

```

## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | < 2.0.0, >= 1.6.6 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | < 6.0, >= 5.22 |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_name"></a> [name](#input\_name) | Topic Name | `string` | n/a | yes |
| <a name="input_policy_statements"></a> [policy\_statements](#input\_policy\_statements) | Policy Statements of the SNS Topic | <pre>list(object({<br>    sid        = string<br>    actions    = list(string)<br>    effect     = string<br>    principals = optional(object({<br>      type        = string<br>      identifiers = list(string)<br>    }))<br>    condition  = optional(object({<br>      test     = string<br>      variable = string<br>      values   = list(string)<br>    }))<br>  }))</pre> | n/a | yes |
| <a name="input_subscriptions"></a> [subscriptions](#input\_subscriptions) | Subscriptions for the SNS Topic. Available `protocol` values:<br>  - `sqs`<br>  - `sms`<br>  - `lambda`<br>  - `firehose`<br>  - `application`<br>  - `email`<br>  - `email-json`<br>  - `http`<br>  - `https`<br><br>[More details...](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/sns_topic_subscription#protocol) | <pre>list(object({<br>    protocol = string<br>    endpoint = string<br>  }))</pre> | `[]` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_id"></a> [id](#output\_id) | Topic ID |
| <a name="output_arn"></a> [arn](#output\_arn) | Topic ARN |
| <a name="output_name"></a> [name](#output\_name) | Topic Name |
| <a name="output_subscriptions"></a> [subscriptions](#output\_subscriptions) | Topic Subscriptions |

## Resources

| Name | Type |
|------|------|
| [aws_sns_topic.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/sns_topic) | resource |
| [aws_sns_topic_policy.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/sns_topic_policy) | resource |
| [aws_sns_topic_subscription.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/sns_topic_subscription) | resource |
| [aws_caller_identity.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/caller_identity) | data source |
| [aws_iam_policy_document.sns_topic_policy](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |
<!-- END_TF_DOCS -->