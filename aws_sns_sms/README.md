# AWS SNS SMS Module

This module creates AWS SNS SMS Settings and CloudWatch alarm for the SMS limit.

**NOTE! Can be used only when AWS SNS is out of the SMS Sandbox.** 

[AWS Documentation: Moving out of the SMS sandbox](https://docs.aws.amazon.com/sns/latest/dg/sns-sms-sandbox-moving-to-production.html)

<!-- Next block is generated by terraform-docs following .terraform-docs.yml config -->
<!-- BEGIN_TF_DOCS -->
## Example

```hcl
# main.tf
module "sms" {
  source = "git::https://github.com/lpavliuk/Terraform-Modules.git//aws_sns_sms"

  sms_limit_usd          = 50
  default_sender_id      = "Example"
  default_sms_type       = "Transactional"

  notification_topic_arn = local.notification_topic_arn # Creates CloudWatch Alarm
}
```

## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | < 2.0.0, >= 1.6.6 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | < 7.0, >= 5.22 |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_sms_limit_usd"></a> [sms\_limit\_usd](#input\_sms\_limit\_usd) | SMS Limit amount in USD | `number` | n/a | yes |
| <a name="input_default_sender_id"></a> [default\_sender\_id](#input\_default\_sender\_id) | Default Sender ID | `string` | `""` | no |
| <a name="input_default_sms_type"></a> [default\_sms\_type](#input\_default\_sms\_type) | Default SMS message type. Available: `Promotional`, `Transactional` | `string` | `""` | no |
| <a name="input_notification_topic_arn"></a> [notification\_topic\_arn](#input\_notification\_topic\_arn) | SNS Topic ARN for CloudWatch alarm actions | `string` | `""` | no |
| <a name="input_sms_limit_alarm_threshold_percent"></a> [sms\_limit\_alarm\_threshold\_percent](#input\_sms\_limit\_alarm\_threshold\_percent) | Threshold in percent of the SMS Limit alarm | `number` | `90` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_sms_limit_usd"></a> [sms\_limit\_usd](#output\_sms\_limit\_usd) | SMS Limit in USD |
| <a name="output_default_sender_id"></a> [default\_sender\_id](#output\_default\_sender\_id) | Default Sender ID |
| <a name="output_default_sms_type"></a> [default\_sms\_type](#output\_default\_sms\_type) | Default SMS type |
| <a name="output_sms_limit_alarm_arn"></a> [sms\_limit\_alarm\_arn](#output\_sms\_limit\_alarm\_arn) | SMS Limit CloudWatch Alarm ARN |
| <a name="output_sms_limit_alarm_name"></a> [sms\_limit\_alarm\_name](#output\_sms\_limit\_alarm\_name) | SMS Limit CloudWatch Alarm Name |
| <a name="output_sms_limit_alarm_threshold"></a> [sms\_limit\_alarm\_threshold](#output\_sms\_limit\_alarm\_threshold) | SMS Limit CloudWatch Alarm Threshold |

## Resources

| Name | Type |
|------|------|
| [aws_cloudwatch_metric_alarm.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
| [aws_iam_role.delivery_status](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role) | resource |
| [aws_iam_role_policy.sns_feedback](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy) | resource |
| [aws_pinpointsmsvoicev2_configuration_set.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/pinpointsmsvoicev2_configuration_set) | resource |
| [aws_sns_sms_preferences.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/sns_sms_preferences) | resource |
| [aws_caller_identity.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/caller_identity) | data source |
| [aws_iam_policy_document.delivery_status_assume_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |
<!-- END_TF_DOCS -->