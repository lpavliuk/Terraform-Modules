# AWS EC2 Instance Module

This module creates AWS EC2 Instance and IAM Role attached to it.

<!-- Next block is generated by terraform-docs following .terraform-docs.yml config -->
<!-- BEGIN_TF_DOCS -->
## Example

```hcl
# main.tf
# https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group
resource "aws_security_group" "this" {
  name        = "SG EC2 - ${local.name}"
  vpc_id      = local.vpc_id

  lifecycle {
    create_before_destroy = true
  }
}

module "ec2_instance" {
  source = "git::https://github.com/lpavliuk/Terraform-Modules.git//aws_ec2_instance"

  name              = local.name
  type              = local.instance_type
  ami               = local.ami_id
  vpc_id            = local.vpc_id
  subnet_id         = local.subnet_group_subnet_id
  has_elastic_ip    = false
  security_group_id = aws_security_group.this.id
  extra_sg_ids      = [ local.vpc_sg_id ]
}
```

## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | < 2.0.0, >= 1.6.6 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | < 6.0, >= 5.22 |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_name"></a> [name](#input\_name) | Name of the Instance | `string` | n/a | yes |
| <a name="input_ami"></a> [ami](#input\_ami) | AMI ID the Instance will be created from | `string` | n/a | yes |
| <a name="input_type"></a> [type](#input\_type) | Type of the Instance. [Available Instance Types](https://aws.amazon.com/ec2/instance-types/) | `string` | `"t2.small"` | no |
| <a name="input_vpc_id"></a> [vpc\_id](#input\_vpc\_id) | VPC ID where the Instance will be launched in | `string` | n/a | yes |
| <a name="input_subnet_id"></a> [subnet\_id](#input\_subnet\_id) | Subnet ID where the Instance will be launched in | `string` | n/a | yes |
| <a name="input_security_group_id"></a> [security\_group\_id](#input\_security\_group\_id) | Default Security Group ID of the Instance | `string` | n/a | yes |
| <a name="input_extra_sg_ids"></a> [extra\_sg\_ids](#input\_extra\_sg\_ids) | Extra Security Groups IDs except for default one | `list(string)` | `[]` | no |
| <a name="input_user_data"></a> [user\_data](#input\_user\_data) | The script that will be executed after the instance is created | `string` | `""` | no |
| <a name="input_has_elastic_ip"></a> [has\_elastic\_ip](#input\_has\_elastic\_ip) | Reserve static Public IP Address for the Instance | `bool` | `false` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_id"></a> [id](#output\_id) | Instance ID |
| <a name="output_name"></a> [name](#output\_name) | Instance Name |
| <a name="output_private_ip"></a> [private\_ip](#output\_private\_ip) | Instance's Private IP Address |
| <a name="output_root_volume_id"></a> [root\_volume\_id](#output\_root\_volume\_id) | Instance's EBS Volume ID (Root) |
| <a name="output_type"></a> [type](#output\_type) | Instance Type |
| <a name="output_security_group_id"></a> [security\_group\_id](#output\_security\_group\_id) | Instance's default Security Group ID |
| <a name="output_vpc_security_group_ids"></a> [vpc\_security\_group\_ids](#output\_vpc\_security\_group\_ids) | Security Group IDs attached to the Instance |
| <a name="output_availability_zone"></a> [availability\_zone](#output\_availability\_zone) | Availability Zone the Instance launched in |
| <a name="output_iam_role_name"></a> [iam\_role\_name](#output\_iam\_role\_name) | IAM Role attached to the Instance |
| <a name="output_iam_profile"></a> [iam\_profile](#output\_iam\_profile) | IAM Profile attached to the Instance |

## Resources

| Name | Type |
|------|------|
| [aws_eip.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/eip) | resource |
| [aws_iam_instance_profile.this_instance](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_instance_profile) | resource |
| [aws_iam_role.this_instance](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role) | resource |
| [aws_instance.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/instance) | resource |
| [aws_iam_policy_document.this_instance](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |
<!-- END_TF_DOCS -->