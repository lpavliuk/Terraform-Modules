# AWS SES Email Receiving S3

This module creates AWS SES Email Receiving resources that receives emails into S3 bucket.
Also, the module creates Domain Identity Verification and DKIM records in Route53. 

<!-- Next block is generated by terraform-docs following .terraform-docs.yml config -->
<!-- BEGIN_TF_DOCS -->
## Example

```hcl
# main.tf
module "email_receiving_registry" {
  source = "git::https://github.com/lpavliuk/Terraform-Modules.git//aws_ses_email_receiving_s3"

  codename          = "registry"
  email_domain_name = "registry.${data.aws_route53_zone.public.name}"
  is_active         = true
  domain_zone_id    = data.aws_route53_zone.public.zone_id

  rules = [
    {
      enabled       = true,
      codename      = "files",
      emails_prefix = ["files@"],
      s3_bucket     = module.s3_bucket.name,
    }
  ]
}

```

## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | < 2.0.0, >= 1.6.6 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | < 7.0, >= 5.22 |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_codename"></a> [codename](#input\_codename) | Codename for the rule set | `string` | n/a | yes |
| <a name="input_is_active"></a> [is\_active](#input\_is\_active) | Whether the rule set is active or not | `bool` | n/a | yes |
| <a name="input_domain_zone_id"></a> [domain\_zone\_id](#input\_domain\_zone\_id) | Domain zone ID | `string` | n/a | yes |
| <a name="input_email_domain_name"></a> [email\_domain\_name](#input\_email\_domain\_name) | Email domain name | `string` | n/a | yes |
| <a name="input_rules"></a> [rules](#input\_rules) | List of rules | <pre>list(object({<br/>    enabled          = optional(bool, true)<br/>    codename         = string<br/>    emails_prefix    = list(string)<br/>    scan             = optional(bool, true)<br/>    s3_bucket        = string<br/>    s3_bucket_prefix = optional(string, "")<br/>  }))</pre> | n/a | yes |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_id"></a> [id](#output\_id) | SES Receipt Rule Set ID |
| <a name="output_arn"></a> [arn](#output\_arn) | SES Receipt Rule Set ARN |
| <a name="output_name"></a> [name](#output\_name) | SES Receipt Rule Set Name |

## Resources

| Name | Type |
|------|------|
| [aws_iam_role.ses](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role) | resource |
| [aws_iam_role_policy.ci_permissions](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy) | resource |
| [aws_route53_record.email_receiving_amazonses_dkim_record](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/route53_record) | resource |
| [aws_route53_record.email_receiving_verification_record](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/route53_record) | resource |
| [aws_route53_record.mx](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/route53_record) | resource |
| [aws_ses_active_receipt_rule_set.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/ses_active_receipt_rule_set) | resource |
| [aws_ses_domain_dkim.email_receiving](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/ses_domain_dkim) | resource |
| [aws_ses_domain_identity.email_receiving](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/ses_domain_identity) | resource |
| [aws_ses_receipt_rule.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/ses_receipt_rule) | resource |
| [aws_ses_receipt_rule_set.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/ses_receipt_rule_set) | resource |
| [aws_caller_identity.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/caller_identity) | data source |
| [aws_iam_policy_document.s3_bucket_pricing_registry](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |
| [aws_iam_policy_document.ses_assume_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |
| [aws_region.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/region) | data source |
<!-- END_TF_DOCS -->