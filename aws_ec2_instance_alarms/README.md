# AWS EC2 Instance Alarms Module

This module creates AWS CloudWatch Alarms for AWS EC2 Instance Metrics.

<!-- Next block is generated by terraform-docs following .terraform-docs.yml config -->
<!-- BEGIN_TF_DOCS -->
## Example

```hcl
# main.tf
# https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group
resource "aws_security_group" "this" {
  name        = "SG EC2 - ${local.name}"
  vpc_id      = local.vpc_id

  lifecycle {
    create_before_destroy = true
  }
}

module "ec2_instance" {
  source = "git::https://github.com/lpavliuk/Terraform-Modules.git//aws_ec2_instance"

  name              = local.name
  type              = local.instance_type
  ami               = local.ami_id
  vpc_id            = local.vpc_id
  subnet_id         = local.subnet_group_subnet_id
  has_elastic_ip    = false
  security_group_id = aws_security_group.this.id
  extra_sg_ids      = [ local.vpc_sg_id ]
}

module "ec2_instance_alarms" {
  source = "git::https://github.com/lpavliuk/Terraform-Modules.git//aws_ec2_instance_alarms"

  name_prefix           = "${local.zone}-"
  ec2_instance_id       = module.ec2_instance.id
  ec2_instance_codename = local.codename
  sns_topic_arns        = local.notification_sns_topic_arn
}
```

## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | < 2.0.0, >= 1.6.6 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | < 6.0, >= 5.22 |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_name_prefix"></a> [name\_prefix](#input\_name\_prefix) | Prefix for CloudWatch alarms names | `string` | `""` | no |
| <a name="input_ec2_instance_id"></a> [ec2\_instance\_id](#input\_ec2\_instance\_id) | Instance ID alarms will be created for | `string` | n/a | yes |
| <a name="input_ec2_instance_codename"></a> [ec2\_instance\_codename](#input\_ec2\_instance\_codename) | Instance Codename for CloudWatch alarms names | `string` | n/a | yes |
| <a name="input_sns_topic_arns"></a> [sns\_topic\_arns](#input\_sns\_topic\_arns) | SNS Topic ARNs attached to CloudWatch alarms | `list(string)` | n/a | yes |
| <a name="input_evaluation_periods"></a> [evaluation\_periods](#input\_evaluation\_periods) | Evaluation period over which to use when triggering alarms | `number` | `5` | no |
| <a name="input_statistics_period"></a> [statistics\_period](#input\_statistics\_period) | Number of seconds that make each statistic period | `number` | `60` | no |
| <a name="input_enable_cpu_utilization_alarms"></a> [enable\_cpu\_utilization\_alarms](#input\_enable\_cpu\_utilization\_alarms) | Create CPU Utilization alarms | `bool` | `true` | no |
| <a name="input_enable_mem_utilization_alarms"></a> [enable\_mem\_utilization\_alarms](#input\_enable\_mem\_utilization\_alarms) | Create Memory Utilization alarms | `bool` | `true` | no |
| <a name="input_enable_disk_utilization_alarms"></a> [enable\_disk\_utilization\_alarms](#input\_enable\_disk\_utilization\_alarms) | Create Disk Utilization alarms | `bool` | `true` | no |
| <a name="input_cpu_utilization_too_high_threshold"></a> [cpu\_utilization\_too\_high\_threshold](#input\_cpu\_utilization\_too\_high\_threshold) | Percentage threshold of CPU utilization alarm | `number` | `80` | no |
| <a name="input_mem_utilization_too_high_threshold"></a> [mem\_utilization\_too\_high\_threshold](#input\_mem\_utilization\_too\_high\_threshold) | Percentage threshold of Memory utilization alarm | `number` | `80` | no |
| <a name="input_disk_utilization_too_high_threshold"></a> [disk\_utilization\_too\_high\_threshold](#input\_disk\_utilization\_too\_high\_threshold) | Percentage threshold of Disk utilization alarm | `number` | `80` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_cpu_utilization_too_high_alarm_arn"></a> [cpu\_utilization\_too\_high\_alarm\_arn](#output\_cpu\_utilization\_too\_high\_alarm\_arn) | 'CPU Utilization Too High' alarm's ARN |
| <a name="output_cpu_utilization_too_high_alarm_name"></a> [cpu\_utilization\_too\_high\_alarm\_name](#output\_cpu\_utilization\_too\_high\_alarm\_name) | 'CPU Utilization Too High' alarm's Name |
| <a name="output_cpu_utilization_too_high_alarm_threshold"></a> [cpu\_utilization\_too\_high\_alarm\_threshold](#output\_cpu\_utilization\_too\_high\_alarm\_threshold) | 'CPU Utilization Too High' alarm's Threshold |

## Resources

| Name | Type |
|------|------|
| [aws_cloudwatch_metric_alarm.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
<!-- END_TF_DOCS -->