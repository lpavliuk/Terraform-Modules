# AWS ElastiCache Group Module

This module creates AWS ElastiCache Replication Group with Security Group and User Group attached to it.

<!-- Next block is generated by terraform-docs following .terraform-docs.yml config -->
<!-- BEGIN_TF_DOCS -->
## Example

```hcl
# main.tf
module "elasticache_group" {
  source = "git::https://github.com/lpavliuk/Terraform-Modules.git//aws_elasticache_group"

  name                        = local.codename
  num_cache_cluster           = 1
  node_type                   = "cache.t4g.micro"

  engine                      = "redis"
  vpc_id                      = data.aws_vpc.selected.id
  elasticache_subnet_group_id = aws_elasticache_subnet_group.this.id
}

# https://registry.terraform.io/providers/hashicorp/aws/5.54.1/docs/resources/elasticache_subnet_group
resource "aws_elasticache_subnet_group" "this" {
  name       = "${local.codename}-cluster"
  subnet_ids = data.aws_subnets.elasticache.ids
}
```

## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | < 2.0.0, >= 1.6.6 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | < 6.0, >= 5.72 |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_name"></a> [name](#input\_name) | Cache Name.<br/><br/>**NOTE!**  Must contain 1 to 63 alphanumeric characters or hyphens (`-`). | `string` | n/a | yes |
| <a name="input_num_cache_cluster"></a> [num\_cache\_cluster](#input\_num\_cache\_cluster) | Number of Cache Cluster.<br/><br/>**NOTE!** Enables **Multi-AZ** and **Automatic Failover** features, if the value is more than 1. | `number` | n/a | yes |
| <a name="input_node_type"></a> [node\_type](#input\_node\_type) | ElastiCache Node Type (e.g. `cache.t4g.micro`)"<br/><br/>[Cache Nodes Supported Types](https://docs.aws.amazon.com/AmazonElastiCache/latest/dg/CacheNodes.SupportedTypes.html) | `string` | n/a | yes |
| <a name="input_port"></a> [port](#input\_port) | Cache Port | `number` | `6379` | no |
| <a name="input_engine"></a> [engine](#input\_engine) | Cache Engine. Available engines:<br/>  - `redis`<br/>  - `valkey` | `string` | `"redis"` | no |
| <a name="input_engine_version"></a> [engine\_version](#input\_engine\_version) | Engine Version | `string` | `"7.1"` | no |
| <a name="input_parameter_group_name"></a> [parameter\_group\_name](#input\_parameter\_group\_name) | Parameter Group Name | `string` | `"default.redis7"` | no |
| <a name="input_vpc_id"></a> [vpc\_id](#input\_vpc\_id) | VPC ID the ElastiCache Instance will be provisioned in | `string` | n/a | yes |
| <a name="input_elasticache_subnet_group_id"></a> [elasticache\_subnet\_group\_id](#input\_elasticache\_subnet\_group\_id) | ElastiCache Subnet Group ID the ElastiCache Instance will be provisioned in | `string` | n/a | yes |
| <a name="input_enable_auto_minor_version_upgrade"></a> [enable\_auto\_minor\_version\_upgrade](#input\_enable\_auto\_minor\_version\_upgrade) | Enable Auto Minor Version Upgrade | `bool` | `true` | no |
| <a name="input_enable_at_rest_encryption"></a> [enable\_at\_rest\_encryption](#input\_enable\_at\_rest\_encryption) | Enable At Rest Encryption | `bool` | `true` | no |
| <a name="input_enable_transit_encryption"></a> [enable\_transit\_encryption](#input\_enable\_transit\_encryption) | Enable Transit Encryption.<br/><br/>**NOTE!** Required for User Group attachment! | `bool` | `true` | no |
| <a name="input_maintenance_window_utc_period"></a> [maintenance\_window\_utc\_period](#input\_maintenance\_window\_utc\_period) | The daily time range of the maintenance (in UTC). Default: `Sat:15:00-Sat:20:00` (Sun:02:00-Sun:07:00 AEDT)<br/>Must not overlap `backup_window_utc_period` parameter | `string` | `"sat:15:00-sat:20:00"` | no |
| <a name="input_cloudwatch_logs_retention_period_days"></a> [cloudwatch\_logs\_retention\_period\_days](#input\_cloudwatch\_logs\_retention\_period\_days) | CloudWatch Logs retention period in days. Available: 1, 3, 5, 7, 14, 30, 60, 90, 120, 150, 180, 365. | `number` | `7` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_id"></a> [id](#output\_id) | ElastiCache Replication Group ID |
| <a name="output_arn"></a> [arn](#output\_arn) | ElastiCache Replication Group ARN |
| <a name="output_name"></a> [name](#output\_name) | Cache Name |
| <a name="output_host"></a> [host](#output\_host) | Cache Host |
| <a name="output_port"></a> [port](#output\_port) | Cache Port |
| <a name="output_instance_type"></a> [instance\_type](#output\_instance\_type) | ElastiCache Replication Group Instance Class |
| <a name="output_security_group_id"></a> [security\_group\_id](#output\_security\_group\_id) | Security Group ID of the ElastiCache |
| <a name="output_user_group_id"></a> [user\_group\_id](#output\_user\_group\_id) | User Group ID of the ElastiCache |
| <a name="output_cloudwatch_log_group"></a> [cloudwatch\_log\_group](#output\_cloudwatch\_log\_group) | CloudWatch Log Group |

## Resources

| Name | Type |
|------|------|
| [aws_cloudwatch_log_group.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_group) | resource |
| [aws_elasticache_replication_group.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/elasticache_replication_group) | resource |
| [aws_elasticache_user.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/elasticache_user) | resource |
| [aws_elasticache_user_group.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/elasticache_user_group) | resource |
| [aws_security_group.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group) | resource |
<!-- END_TF_DOCS -->